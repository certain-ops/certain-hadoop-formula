# This formula requires an SDB store that is common to all boxes. Initialization
# of the hadoop cluster requires dynamic configuration and requires each node
# the cluster to know where the managers are. These values are kept in SDB. 
#
# The following pillar configures a memcached SDB store via the Salt formula
# https://github.com/saltstack-formulas/salt-formula
salt:
  minion:
    hadoop:
      driver: zookeeper
      hosts:
        - 10.0.1.3


# Hadoop settings
hadoop:
  version: 3.0.0
  target: 'if101*'
  target_type: glob

  # core-site.xml - These config parameters apply to all roles
  core:

  hdfs:
    user:
      name: hdfs
      uid: 3011
    group:
      name: hdfs
      gid: 3011

    # hdfs-site.xml - These config parameters apply to all roles
    config:
      dfs:
        namenode:
          name:
            dir: '/var/run/hadoop/hdfs/name_node/'

  yarn:
    user:
      name: yarn
      uid: 3012
    group:
      name: yarn
      gid: 3012

  # Parameters specific to the ResourceManager role
  resource_manager:
    yarn:

      # yarn-site.xml
      config:
        yarn:
          resourcemanager:
            hostname: '0.0.0.0:3001'

  # Parameters specific to the ResourceManager role
  name_node:
    port: 3000
    hdfs:

      # hdfs-site.xml
      config:
        dfs:
          namenode:
            name:
              dir: '/var/run/hadoop/NameNode'

  # Parameters specific to the ResourceManager role
  data_node:
    hdfs:
      config:
        dfs:
          namenode:
            name:
              dir: '/var/run/hadoop/DataNode'

  # Parameters specific to the ResourceManager role
  node_manager:
